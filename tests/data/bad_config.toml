[Application]
poll_interval = 10.0

[Application.connections.rabbitmq]
heartbeat_interval = 60
hostname = "rabbitmq.server.local"
password = "rabbits"
port = 5672
qos_prefetch = 10
ssl = false
username = "rejected"
virtual_host = "/"

[Application.connections.rabbitmq.definitions]
exchanges = [
    { arguments = {}, auto_delete = false, durable = true, name = "test", type = "topic" },
]
queues = [
    { arguments = {}, auto_delete = false, durable = true, name = "test" },
]

[[Application.connections.rabbitmq.definitions.bindings]]
destination = "test"
destination_type = "queue"
routing_key = "test.messages"
source = "test"

[Application.connections.rabbitmq.definitions.bindings.arguments]

[Application.connections.rabbitmq2]
heartbeat_interval = 60
hostname = "localhost"
password = "rabbitmq"
port = 5672
qos_prefetch = 100
ssl = false
username = "rejected"
virtual_host = "/"

[Application.connections.rabbitmq2.definitions]
bindings = []
exchanges = []
queues = []

[Application.consumers.async]
ack = true
class = "examples.AsyncExampleConsumer"
connections = [
    "rabbitmq",
    { confirm = false, consume = false, name = "rabbitmq2" },
]
max_errors = 100
qty = 1
queue = "test"

[Application.consumers.sync]
ack = true
class = "examples.ExampleConsumer"
connections = [
    "rabbitmq",
    { consume = false, name = "rabbitmq2" },
    "foo",
]
error_exchange = "errors"
max_errors = 100
qty = 1
queue = "generated_messages"

[Application.consumers.sync.config]
bar = "baz"
foo = true

[Application.stats]
log = true

[Application.stats.influxdb]
database = "bar"
enabled = false
host = "influxdb"
password = "foo"
port = 8086
scheme = "http"
user = "influxdb"

[Application.stats.statsd]
enabled = false
host = "localhost"
port = 8125
prefix = "application.rejected"

[Daemon]
group = "daemon"
pidfile = "/var/run/rejected.pid"
user = "rejected"

[Logging]
disable_existing_loggers = true
incremental = false
version = 1

[Logging.filters.correlation]
"()" = "rejected.logging.CorrelationFilter"
exists = true

[Logging.filters.no_correlation]
"()" = "rejected.logging.CorrelationFilter"
exists = false

[Logging.formatters.syslog]
format = "%(levelname)s <PID %(process)d:%(processName)s> %(name)s.%(funcName)s: %(message)s"

[Logging.formatters.syslog_correlation]
format = "%(levelname)s <PID %(process)d:%(processName)s> %(name)s.%(funcName)s: %(message)s {CID %(correlation_id)s)"

[Logging.formatters.verbose]
datefmt = "%Y-%m-%d %H:%M:%S"
format = "%(levelname) -10s %(asctime)s %(process)-6d %(processName) -25s %(name) -20s %(funcName) -25s: %(message)s"

[Logging.formatters.verbose_correlation]
datefmt = "%Y-%m-%d %H:%M:%S"
format = "%(levelname) -10s %(asctime)s %(process)-6d %(processName) -25s %(name) -20s %(funcName) -25s: %(message)s {CID %(correlation_id)s}"

[Logging.handlers.console]
class = "logging.StreamHandler"
filters = [
    "no_correlation",
]
formatter = "verbose"

[Logging.handlers.console_correlation]
class = "logging.StreamHandler"
filters = [
    "correlation",
]
formatter = "verbose_correlation"

[Logging.handlers.syslog]
address = "/var/run/syslog"
class = "logging.handlers.SysLogHandler"
facility = "daemon"
filters = [
    "no_correlation",
]
formatter = "syslog"

[Logging.handlers.syslog_correlation]
address = "/var/run/syslog"
class = "logging.handlers.SysLogHandler"
facility = "daemon"
filters = [
    "correlation",
]
formatter = "syslog"

[Logging.loggers.helper]
handlers = [
    "console",
    "console_correlation",
    "syslog",
    "syslog_correlation",
]
level = "INFO"
propagate = true

[Logging.loggers.rejected]
handlers = [
    "console",
    "console_correlation",
    "syslog",
    "syslog_correlation",
]
level = "INFO"
propagate = false

[Logging.loggers."rejected.consumer"]
handlers = [
    "console",
    "console_correlation",
    "syslog",
    "syslog_correlation",
]
level = "INFO"
propagate = false

[Logging.loggers."rejected.example"]
handlers = [
    "console",
    "console_correlation",
    "syslog",
    "syslog_correlation",
]
level = "INFO"
propagate = false

[Logging.loggers."rejected.mcp"]
handlers = [
    "console",
    "console_correlation",
    "syslog",
    "syslog_correlation",
]
level = "DEBUG"
propagate = false

[Logging.loggers."rejected.process"]
handlers = [
    "console",
    "console_correlation",
    "syslog",
    "syslog_correlation",
]
level = "DEBUG"
propagate = false

[Logging.loggers."rejected.statsd"]
handlers = [
    "console",
    "console_correlation",
    "syslog",
    "syslog_correlation",
]
level = "DEBUG"
propagate = false

[Logging.loggers.sprockets_influxdb]
handlers = [
    "console",
    "console_correlation",
    "syslog",
    "syslog_correlation",
]
level = "DEBUG"
propagate = false

[Logging.loggers.tornado]
handlers = [
    "console",
    "console_correlation",
    "syslog",
    "syslog_correlation",
]
level = "INFO"
propagate = true
